<%= stylesheet_link_tag "skeleton.css", "normalize.css" %>
<%= favicon_link_tag 'favicon.png' %>

<div style="margin-left:10px;">
<h1>Overview of stats</h1>
<h3>Champs</h3>
<div style="width:100%;height:0.2px;background-color:#F79C80;">
</div>
<script>
$("#champions").change(function() {

	var $dropdown = $(this);

	$.getJSON(<%= @hash.collect { |s| [ s[1]['stats'], ] }  %>, function(data) {
	
		var key = $dropdown.val();
		var vals = [];
							
		switch(key) {
			case 'beverages':
				vals = data.beverages.split(",");
				break;
			case 'snacks':
				vals = data.snacks.split(",");
				break;
			case 'base':
				vals = ['Please choose from above'];
		}
		
		var $secondChoice = $("#championstats");
		$secondChoice.empty();
		$.each(vals, function(index, value) {
			$secondChoice.append("<option>" + value + "</option>");
		});

	});
});
</script>
<%= select_tag(:champions, options_for_select(@hash.collect { |p| [ p[1]['name'], p[1]['id'], ] })) %>

<select id="championstats">
  <option>Please choose from above</option>
</select>

<table class="u-full-width">
  <thead>
  <tr>
    <th>Champion</th>
    <th>armor</th>
    <th>armorperlevel</th>
    <th>attackdamage</th>
    <th>attackdamageperlevel</th>
    <th>attackrange</th>
    <th>attackspeedoffset</th>
    <th>attackspeedperlevel</th>
    <th>crit</th>
    <th>critperlevel</th>
    <th>hp</th>
    <th>hpperlevel</th>
    <th>hpregen</th>
    <th>hpregenperlevel</th>
    <th>movespeed</th>
    <th>mp</th>
    <th>mpperlevel</th>
    <th>mpregen</th>
    <th>mpregenperlevel</th>
    <th>spellblock</th>
    <th>spellblockperlevel</th>
  </tr>
  </thead>
  <% @hash.each do |champ| %>
  <tbody>
  <tr>
    <td style="background-color:#F79F81;"> <%= image_tag("http://ddragon.leagueoflegends.com/cdn/8.12.1/img/champion/#{ champ[1]['key'] }.png", size: "30x30") %> <%= champ[1]['name'] %> </td>
    <td class="tda"> <%= champ[1]['stats']['armor'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['armorperlevel'] %></td>
    <td class="tda"> <%= champ[1]['stats']['attackdamage'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['attackdamageperlevel'] %></td>
    <td class="tda"> <%= champ[1]['stats']['attackrange'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['attackspeedoffset'] %></td>
    <td class="tda"> <%= champ[1]['stats']['attackspeedperlevel'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['crit'] %></td>
    <td class="tda"> <%= champ[1]['stats']['critperlevel'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['hp'] %></td>
    <td class="tda"> <%= champ[1]['stats']['hpperlevel'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['hpregen'] %></td>
    <td class="tda"> <%= champ[1]['stats']['hpregenperlevel'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['movespeed'] %></td>
    <td class="tda"> <%= champ[1]['stats']['mp'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['mpperlevel'] %></td>
    <td class="tda"> <%= champ[1]['stats']['mpregen'] %></td>
    <td class="tdb"> <%= champ[1]['stats']['mpregenperlevel'] %></td>
    <td class="tda"> <%= champ[1]['stats']['spellblock'] %></td> 
    <td class="tdb"> <%= champ[1]['stats']['spellblockperlevel'] %></td>
  </tr>
  <tbody>
<% end %>

</table>

</div>
